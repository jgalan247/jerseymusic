{% extends 'base.html' %}

{% block title %}Secure Payment - Jersey Events{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-8 text-center">

            <!-- Artist Info -->
            <div class="card mb-4 border-success">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-shield-alt me-2"></i>Secure Artist Payment
                    </h5>
                </div>
                <div class="card-body">
                    <p class="mb-2">
                        <strong>Payment processed by:</strong> {{ artist.display_name }}
                    </p>
                    <p class="text-muted small mb-0">
                        <i class="fas fa-info-circle me-1"></i>
                        Your payment goes directly to the artist's SumUp merchant account
                    </p>
                </div>
            </div>

            <!-- Order Summary -->
            <div class="card mb-4">
                <div class="card-body">
                    <h6>Order Summary</h6>
                    <p><strong>Order:</strong> {{ order.order_number }}</p>
                    <p><strong>Total:</strong> £{{ order.total|floatformat:2 }}</p>
                </div>
            </div>

            <!-- Loading Animation -->
            <div class="mb-4">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <h4 class="mt-3">Redirecting to Secure Payment...</h4>
                <p class="text-muted">
                    You will be redirected to {{ artist.display_name }}'s secure SumUp payment page.
                </p>
            </div>

            <!-- Backup Manual Link -->
            <div class="mt-4">
                <a href="{{ checkout_url }}" class="btn btn-primary btn-lg">
                    <i class="fas fa-credit-card me-2"></i>Continue to Payment
                </a>
                <div class="mt-3">
                    <a href="{% url 'payments:select_method' %}" class="btn btn-outline-secondary">
                        <i class="fas fa-arrow-left me-1"></i>Back to Payment Options
                    </a>
                </div>
            </div>

            <!-- Security Info -->
            <div class="mt-4">
                <small class="text-muted">
                    <i class="fas fa-lock me-1"></i>
                    Payment secured by SumUp • PCI DSS Compliant
                </small>
            </div>
        </div>
    </div>
</div>

<!-- Auto-redirect Script -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Auto-redirect after 3 seconds
    setTimeout(function() {
        window.location.href = '{{ checkout_url }}';
    }, 3000);
});
</script>

<style>
.spinner-border {
    width: 3rem;
    height: 3rem;
}
</style>
{% endblock %}