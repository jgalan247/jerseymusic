<!DOCTYPE html>
<html>
<head>
    <title>Minimal SumUp Widget Test</title>
    <script src="https://gateway.sumup.com/gateway/ecom/card/v2/sdk.js"></script>
</head>
<body>
    <h1>Minimal SumUp Widget Test</h1>
    <div id="sumup-card"></div>

    <script>
        console.log('Starting widget test...');

        // Wait for DOM to be ready
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM ready, checking SumUpCard...');

            // Check if SumUpCard is available
            if (typeof SumUpCard !== 'undefined') {
                console.log('✅ SumUpCard is available!');
                console.log('SumUpCard object:', SumUpCard);

                // Try to mount with a demo checkout ID
                try {
                    console.log('Attempting to mount widget...');

                    const widget = SumUpCard.mount({
                        id: 'sumup-card',
                        checkoutId: '0a8c6972-58f2-41d8-bc15-6afd83f89bb0', // Real checkout ID from our test
                        onResponse: function (type, body) {
                            console.log('Widget Response - Type:', type);
                            console.log('Widget Response - Body:', body);
                        },
                        onLoad: function() {
                            console.log('✅ Widget loaded successfully!');
                        }
                    });

                    console.log('✅ SumUpCard.mount() called successfully');
                    console.log('Widget object:', widget);

                } catch (error) {
                    console.error('❌ Error mounting widget:', error);
                }

            } else {
                console.error('❌ SumUpCard not found');
                console.log('Available window objects:', Object.keys(window).filter(k => k.includes('Sum')));
            }
        });

        // Also try after a delay
        setTimeout(function() {
            console.log('Delayed check for SumUpCard...');
            if (typeof SumUpCard !== 'undefined') {
                console.log('✅ SumUpCard available after delay');
            } else {
                console.error('❌ SumUpCard still not available after delay');
            }
        }, 3000);
    </script>
</body>
</html>